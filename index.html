<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Enchanted Bonds - Interactive Story</title>
<style>
  body {
    background: #1a1a2e;
    color: #e0d4f7;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    max-width: 700px;
    margin: 2rem auto;
    padding: 1rem;
    line-height: 1.5;
  }
  h1, h2 {
    text-align: center;
    color: #c2a7e0;
  }
  button {
    background: #6a5acd;
    border: none;
    border-radius: 6px;
    color: white;
    padding: 12px 20px;
    margin: 8px 0;
    width: 100%;
    font-size: 1rem;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  button:hover {
    background: #5a47b8;
  }
  input, select {
    width: 100%;
    padding: 10px;
    margin: 8px 0;
    border-radius: 6px;
    border: none;
    font-size: 1rem;
  }
  #game-container {
    margin-top: 2rem;
  }
  #login-section, #save-section {
    background: #2c2c54;
    padding: 1rem;
    border-radius: 8px;
    margin-bottom: 1rem;
  }
  #save-section button {
    width: auto;
    margin-right: 10px;
  }
  .choice-btn {
    display: block;
    margin: 6px 0;
    padding: 12px;
    background: #8a79e6;
    border-radius: 6px;
    border: none;
    color: white;
    font-size: 1rem;
    cursor: pointer;
  }
  .choice-btn:hover {
    background: #6f5cd1;
  }
  #login-message, #save-message {
    font-weight: bold;
  }
</style>
</head>
<body>

<h1>Enchanted Bonds</h1>

<div id="login-section">
  <h2>Login / Create Account</h2>
  <input type="text" id="username-input" placeholder="Enter username" autocomplete="off" />
  <button id="login-btn">Login</button>
  <p id="login-message" style="color: #f88; margin-top: 0.5rem;"></p>
</div>

<div id="save-section" style="display:none;">
  <h2>Save Slots</h2>
  <button data-slot="1">Save Slot 1</button>
  <button data-slot="2">Save Slot 2</button>
  <button data-slot="3">Save Slot 3</button>
  <button id="load-btn">Load Last Save</button>
  <button id="clear-saves-btn" style="background:#b54;">Clear All Saves</button>
  <p id="save-message" style="color: #f88; margin-top: 0.5rem;"></p>
</div>

<div id="game-container"></div>

<script>
(() => {
  let username = null;
  let playerName = '';
  let playerPronouns = { subject: 'they', object: 'them', possessive: 'their' };
  let interestGender = 'guardian';
  let currentSceneKey = 'setupName';

  const pronounsSets = {
    they: { subject: 'they', object: 'them', possessive: 'their' },
    she: { subject: 'she', object: 'her', possessive: 'her' },
    he: { subject: 'he', object: 'him', possessive: 'his' }
  };

  // Capitalize first letter helper
  const cap = s => s.charAt(0).toUpperCase() + s.slice(1);

  // Elements
  const loginSection = document.getElementById('login-section');
  const saveSection = document.getElementById('save-section');
  const gameContainer = document.getElementById('game-container');
  const loginMessage = document.getElementById('login-message');
  const saveMessage = document.getElementById('save-message');

  // Login
  function handleLogin() {
    const input = document.getElementById('username-input');
    const name = input.value.trim();
    if (!name) {
      loginMessage.textContent = 'Please enter a username.';
      return;
    }
    username = name;
    loginSection.style.display = 'none';
    saveSection.style.display = 'block';
    loginMessage.textContent = '';
    loadGame();
    renderScene(currentSceneKey);
  }

  document.getElementById('login-btn').addEventListener('click', handleLogin);

  // Save/Load
  function saveGame(slot) {
    if (!username) return;
    const saveData = {
      scene: currentSceneKey,
      name: playerName,
      pronouns: playerPronouns,
      interest: interestGender
    };
    localStorage.setItem(`${username}_save${slot}`, JSON.stringify(saveData));
    saveMessage.textContent = `Game saved to Slot ${slot}`;
    setTimeout(() => saveMessage.textContent = '', 3000);
  }

  function loadGame() {
    if (!username) return;
    for (let i = 1; i <= 3; i++) {
      const saved = localStorage.getItem(`${username}_save${i}`);
      if (saved) {
        const data = JSON.parse(saved);
        currentSceneKey = data.scene || 'setupName';
        playerName = data.name || '';
        playerPronouns = data.pronouns || pronounsSets['they'];
        interestGender = data.interest || 'guardian';
        return;
      }
    }
  }

  function clearSaves() {
    if (!username) return;
    for (let i = 1; i <= 3; i++) {
      localStorage.removeItem(`${username}_save${i}`);
    }
    saveMessage.textContent = 'All save slots cleared.';
    setTimeout(() => saveMessage.textContent = '', 3000);
  }

  document.querySelectorAll('#save-section button[data-slot]').forEach(btn => {
    btn.addEventListener('click', () => {
      const slot = btn.getAttribute('data-slot');
      saveGame(slot);
    });
  });

  document.getElementById('load-btn').addEventListener('click', () => {
    loadGame();
    renderScene(currentSceneKey);
  });

  document.getElementById('clear-saves-btn').addEventListener('click', () => {
    clearSaves();
  });

  // Scenes object holding all story parts
  const scenes = {
    // Setup scenes
    setupName: {
      text: `Before we begin, what is your name?`,
      input: true,
      next: 'setupPronouns'
    },
    setupPronouns: {
      text: `Choose your pronouns:`,
      select: [
        { value: 'they', label: 'They/Them' },
        { value: 'she', label: 'She/Her' },
        { value: 'he', label: 'He/Him' }
      ],
      next: 'setupInterest'
    },
    setupInterest: {
      text: `Who are you most drawn to?`,
      select: [
        { value: 'guardian', label: 'The Guardian (strong, cruel, protective)' },
        { value: 'sorcerer', label: 'The Sorcerer (cold, brilliant, dangerous)' },
        { value: 'both', label: 'Both — I want them all' }
      ],
      next: 'start'
    }
  };

  // Add main story and spicy scenes
  Object.assign(scenes, {
    start: {
      text: () => 
        `Welcome, ${cap(playerName)}. You’ve always felt a pull toward something more—something dangerous and thrilling. ` +
        `Tonight, your life changes forever. Will you seek the fierce Guardian, the enigmatic Sorcerer, or dare to embrace them both?`,
      choices: [
        { text: "Seek the Guardian", next: "guardian_intro" },
        { text: "Seek the Sorcerer", next: "sorcerer_intro" },
        { text: "Embrace Both", next: "both_intro" }
      ]
    },
    guardian_intro: {
      text: () => 
        `The Guardian stands tall and imposing, eyes sharp as they watch your every move. ` +
        `Their presence alone makes your ${playerPronouns.possessive} heart race. "You’ve come far, ${playerName}," ` +
        `they say, voice low and commanding.`,
      choices: [
        { text: "Step closer to the Guardian", next: "guardian_spicy" },
        { text: "Hesitate and pull back", next: "guardian_cold" }
      ]
    },
    guardian_spicy: {
      text: () =>
        `The Guardian’s hands are rough but gentle as they trace the curve of your jaw, their breath hot against your skin. ` +
        `They pull you close, and the room seems to disappear. Their lips find yours, demanding and fierce, igniting a fire deep inside.` +
        `Every touch, every whisper is a promise of danger and delight.`,
      choices: [
        { text: "Melt into their embrace", next: "guardian_heat_up" },
        { text: "Pull back, overwhelmed", next: "guardian_cold" }
      ]
    },
    guardian_heat_up: {
      text: () =>
        `Their hands explore boldly, leaving trails of heat over your body. ` +
        `You respond eagerly, your senses alive with every flicker of their touch. ` +
        `Clothes fall away, skin pressing hot against skin, the Guardian’s strength wrapping you in a storm of passion and control. ` +
        `You are wild and free, lost in the tempest of their desire.`,
      choices: [
        { text: "Let go completely", next: "guardian_climax" },
        { text: "Slow down, catch your breath", next: "guardian_calm_down" }
      ]
    },
    guardian_climax: {
      text: () =>
        `The world shatters in a blaze of sensation as you reach your peak, the Guardian’s name a fierce chant on your lips. ` +
        `You collapse together, bodies slick and breathing heavy, tangled in the afterglow of a fire only they could spark.`,
      choices: [
        { text: "Begin anew", next: "start" }
      ]
    },
    guardian_calm_down: {
      text: () =>
        `You pull the Guardian close, savoring the slow burn between you. ` +
        `Words are unnecessary; the silence speaks volumes of trust and connection. ` +
        `You realize this bond is as much about power as it is tenderness.`,
      choices: [
        { text: "Embrace this moment", next: "start" }
      ]
    },
    guardian_cold: {
      text: () =>
        `The Guardian's eyes darken, and they take a step back. "Not ready," they growl, their voice thick with disappointment. ` +
        `You feel the cold distance grow, a reminder that some fires need courage to ignite.`,
      choices: [
        { text: "Gather courage and try again", next: "guardian_intro" },
        { text: "Turn away and choose differently", next: "start" }
      ]
    },
    sorcerer_intro: {
      text: () =>
        `The Sorcerer’s gaze pierces through you like ice. Their sharp smile promises secrets and a dangerous game. ` +
        `"Curious, aren’t you, ${playerName}?" they whisper, voice velvet but edged with steel.`,
      choices: [
        { text: "Approach the Sorcerer", next: "sorcerer_spicy" },
        { text: "Step back cautiously", next: "sorcerer_cold" }
      ]
    },
    sorcerer_spicy: {
      text: () =>
        `The Sorcerer’s fingers trace glowing runes on your skin, sparks flying between your bodies. ` +
        `Their breath is intoxicating as they lean close, words like magic dripping from their lips. ` +
        `Desire and danger mingle in the air, wrapping you both in a heady spell.`,
      choices: [
        { text: "Surrender to the magic", next: "sorcerer_heat_up" },
        { text: "Resist the spell", next: "sorcerer_cold" }
      ]
    },
    sorcerer_heat_up: {
      text: () =>
        `The runes pulse with power as your bodies move together in perfect rhythm. ` +
        `Every touch leaves a trail of light and pleasure, the Sorcerer’s control both thrilling and overwhelming. ` +
        `You are lost in the dance of shadow and flame, a world where only the two of you exist.`,
      choices: [
        { text: "Dive deeper into the spell", next: "sorcerer_climax" },
        { text: "Slow the pace, catch your breath", next: "sorcerer_calm_down" }
      ]
    },
    sorcerer_climax: {
      text: () =>
        `Magic explodes in a brilliant crescendo as you reach your peak, the Sorcerer’s name a chant in your mind. ` +
        `You collapse into their arms, breathless and glowing with the afterglow of shared power and passion.`,
      choices: [
        { text: "Restart your journey", next: "start" }
      ]
    },
    sorcerer_calm_down: {
      text: () =>
        `You pull the Sorcerer close, feeling the warmth beneath their cold exterior. ` +
        `The tension melts into a quiet connection, a promise of mysteries yet to be unraveled.`,
      choices: [
        { text: "Stay in this moment", next: "start" }
      ]
    },
    sorcerer_cold: {
      text: () =>
        `The Sorcerer’s eyes narrow, disappointment flashing like lightning. "Too timid," they say, voice sharp as frost. ` +
        `You feel the chill of rejection, a warning that magic is not for the faint of heart.`,
      choices: [
        { text: "Try again with more courage", next: "sorcerer_intro" },
        { text: "Step away and reconsider", next: "start" }
      ]
    },
    both_intro: {
      text: () =>
        `Bold and fearless, you reach for both the Guardian and the Sorcerer. ` +
        `They exchange a look—equal parts challenge and admiration—as they step forward to claim you together.`,
      choices: [
        { text: "Accept their touch", next: "both_spicy" },
        { text: "Hesitate, unsure of the path", next: "start" }
      ]
    },
    both_spicy: {
      text: () =>
        `Their hands and lips explore you in tandem, a symphony of passion and power unlike anything you’ve known. ` +
        `The Guardian’s strength grounds you while the Sorcerer’s magic lifts you higher. ` +
        `Together, they weave a spell of desire that leaves you trembling and breathless.`,
      choices: [
        { text: "Give in fully", next: "both_climax" },
        { text: "Slow it down and savor", next: "both_calm_down" }
      ]
    },
    both_climax: {
  text: () =>
    `The world blurs into a kaleidoscope of sensation as you reach a shared peak, voices and hearts united. ` +
    `You collapse together in a tangled heap of skin and soul, a perfect storm of love and power.`,
  choices: [
    { text: "Continue your journey", next: "after_climax" }
  ]
},
both_calm_down: {
  text: () =>
    `In the quiet aftermath, the Guardian and Sorcerer hold you close, each offering a different kind of comfort. ` +
    `You realize this bond is as complex as it is thrilling, a promise of endless possibilities.`,
  choices: [
    { text: "Embrace the future", next: "after_climax" }
  ]
},
after_climax: {
  text: () =>
    `Refreshed and bonded, you face the dawn with hope and determination. The world feels wide open, filled with possibilities. ` +
    `Do you venture deeper into the unknown or return to what’s familiar?`,
  choices: [
    { text: "Explore the mysterious forest", next: "forest_path" },
    { text: "Return to the village for answers", next: "village_path" }
  ]
},

forest_path: {
  text: () =>
    `The forest greets you with whispers and shadows, alive with magic. You feel the pulse of ancient power beneath your feet. ` +
    `Ahead, the path splits — one route winding toward a glowing glade, the other descending into a foggy hollow.`,
  choices: [
    { text: "Head toward the glowing glade", next: "glade_scene" },
    { text: "Descend into the foggy hollow", next: "hollow_scene" }
  ]
},

village_path: {
  text: () =>
    `The village buzzes with cautious eyes and whispered rumors. Old friends greet you with relief, but secrets linger in the air. ` +
    `In the town square, you spot the Elder beckoning you over, while the local blacksmith seems eager to talk.`,
  choices: [
    { text: "Speak with the Elder", next: "elder_scene" },
    { text: "Visit the blacksmith", next: "blacksmith_scene" }
  ]
},

glade_scene: {
  text: () =>
    `The glowing glade hums with an otherworldly energy. Strange flowers bloom under the light of an unseen moon. ` +
    `A figure cloaked in silver steps forward — a guardian of the forest, with eyes that know your soul.`,
  choices: [
    { text: "Approach the guardian", next: "guardian_dialogue" },
    { text: "Stay cautious and observe", next: "observe_guardian" }
  ]
},

hollow_scene: {
  text: () =>
    `The fog thickens, swallowing sound and light. You sense something watching, waiting. ` +
    `Suddenly, a low growl rumbles from the shadows. You can either prepare to defend yourself or try to hide.`,
  choices: [
    { text: "Prepare to defend yourself", next: "defend_hollow" },
    { text: "Try to hide silently", next: "hide_hollow" }
  ]
},

elder_scene: {
  text: () =>
    `The Elder’s eyes gleam with ancient wisdom as she speaks of prophecies and hidden threats. ` +
    `She offers you a choice — a dangerous quest that could unlock your true power or a safer path to gather allies.`,
  choices: [
    { text: "Accept the dangerous quest", next: "dangerous_quest" },
    { text: "Gather allies first", next: "gather_allies" }
  ]
},

blacksmith_scene: {
  text: () =>
    `The blacksmith wipes his hands and leans in, whispering about strange weapons and rumors of dark forces. ` +
    `He offers to craft something unique for you — but it requires rare materials from the forest or the village outskirts.`,
  choices: [
    { text: "Search the forest for materials", next: "forest_path" },
    { text: "Explore the village outskirts", next: "village_outskirts" }
  ]
},

village_outskirts: {
  text: () =>
    `The outskirts are quiet, but you catch glimpses of shadowy figures moving between the trees. Danger lurks close, ` +
    `but so does opportunity. You can investigate further or return to the village.`,
  choices: [
    { text: "Investigate further", next: "shadow_encounter" },
    { text: "Return to the village", next: "village_path" }
  ]
},

shadow_encounter: {
  text: () =>
    `As you edge deeper into the shadows, a rough hand clamps on your wrist. A rugged stranger grins, eyes dark with hunger. ` +
    `“Well, well, what do we have here? A little firecracker looking for trouble?” His breath is warm against your neck.`,
  choices: [
    { text: "Push him away and run", next: "escape_shadow" },
    { text: "Lean in and tease him", next: "tease_stranger" }
  ]
},

escape_shadow: {
  text: () =>
    `You shove him hard, breaking free, heart pounding like a damn drum. You sprint through the trees, the stranger’s curses trailing behind you. ` +
    `You know this isn’t over.`,
  choices: [
    { text: "Catch your breath and hide", next: "hide_hollow" },
    { text: "Turn and face him", next: "face_stranger" }
  ]
},

tease_stranger: {
  text: () =>
    `You smirk, stepping closer, voice low and dangerous. “You think you can handle this fire?” His eyes flash, and suddenly he’s on you, hands exploring like a goddamn man starving for a fight—and maybe more.`,
  choices: [
    { text: "Give in to the heat", next: "stranger_heat" },
    { text: "Pull back, stay in control", next: "stay_control" }
  ]
},

stranger_heat: {
  text: () =>
    `His lips crash against yours, hungry and demanding. You melt into the chaos, skin slick with sweat and desire. “You’re fucking wild,” he growls as his hands roam, fingers digging into places that make your breath hitch.`,
  choices: [
    { text: "Ride the wave", next: "wild_ride" },
    { text: "Slow it down, savor it", next: "slow_savor" }
  ]
},

wild_ride: {
  text: () =>
    `The world narrows to the heat between you, every touch sending jolts of pleasure that make you forget everything but the need to scream his name. It’s rough, raw, and perfect — a damn tempest you never want to end.`,
  choices: [
    { text: "Hold on tight", next: "after_wild_ride" },
    { text: "Let go completely", next: "after_wild_ride" }
  ]
},

slow_savor: {
  text: () =>
    `You drag the moment out, fingers tracing every curve, every gasp. The tension builds like a slow burn, teasing and torturing until you’re trembling on the edge, begging for release.`,
  choices: [
    { text: "Let go now", next: "after_wild_ride" },
    { text: "Keep teasing", next: "tease_more" }
  ]
},

after_wild_ride: {
  text: () =>
    `Breathless and tangled, you collapse against him, hearts racing. The stranger’s grin is wicked but satisfied. “You’re something else, firecracker.”`,
  choices: [
    { text: "Ask his name", next: "ask_name" },
    { text: "Slip away quietly", next: "slip_away" }
  ]
},

tease_more: {
  text: () =>
    `You pull back just enough to watch him squirm, lips biting, eyes dark with frustration and desire. “Not so fast, sweetheart,” you purr. “I’m not done with you yet.”`,
  choices: [
    { text: "Keep teasing", next: "tease_more" },
    { text: "Give in now", next: "after_wild_ride" }
  ]
},

ask_name: {
  text: () =>
    `He chuckles low and says, “Name’s Rafe. And you, gorgeous?”`,
  choices: [
    { text: "Tell him your name", next: "introduce_kayla" },
    { text: "Keep it mysterious", next: "mysterious_exit" }
  ]
},

introduce_kayla: {
  text: () =>
    `“Kayla,” you say, voice soft but fierce. Rafe’s grin widens, like he’s already making plans.`,
  choices: [
    { text: "Stay with him", next: "stay_with_rafe" },
    { text: "Head back to the village", next: "village_path" }
  ]
},

mysterious_exit: {
  text: () =>
    `You slip away into the fog, leaving Rafe wanting more. Mystery suits you — for now.`,
  choices: [
    { text: "Vanish into the night", next: "hide_hollow" },
    { text: "Return to the village", next: "village_path" }
  ]
},

stay_with_rafe: {
  text: () =>
    `Night deepens as Rafe pulls you close again, whispers rough promises in your ear. The fire between you burns hotter than ever — a dangerous, delicious addiction.`,
  choices: [
    { text: "Dive deeper into desire", next: "rafe_desire" },
    { text: "Pull away for clarity", next: "rafe_clarity" }
  ]
},

rafe_desire: {
  text: () =>
    `His hands claim your body with fierce need, every touch a promise of more. “You’re mine tonight, Kayla,” he growls, and you fucking love it.`,
  choices: [
    { text: "Surrender completely", next: "both_climax" },
    { text: "Push back, tease him", next: "tease_more" }
  ]
},

rafe_clarity: {
  text: () =>
    `You take a breath, pulling away just enough to remind yourself why you fight — to stay in control, to own your fire. Rafe watches, eyes gleaming, waiting for your next move.`,
  choices: [
    { text: "Give in to him", next: "rafe_desire" },
    { text: "Walk away for now", next: "village_path" }
  ]
},
rafe_desire_explicit: {
  text: () =>
    `Rafe’s eyes burn with a savage hunger as he drags you against him. His rough hands roam your body like they’re claiming it piece by piece, fingers tracing over every curve, every sensitive spot with deliberate cruelty. ` +
    `His breath hitches as he nips at your neck, teeth grazing skin so lightly it’s torture. “You’re mine tonight, Kayla,” he growls low and dangerous.` +
    `You can feel the hard press of him against your thigh, heat pooling and dripping like molten fire between your legs.` +
    `His fingers find the wetness gathering there, slick and aching, and he slides two in without warning, slow, teasing, making you shudder.` +
    `“God, you’re so fucking wet for me,” he pants, lips crashing back down to devour your mouth, tongue demanding, claiming.` +
    `Your hands tangle in his hair, pulling him closer as his fingers curl inside you, hitting spots that make your breath catch and your body arch in pure, unfiltered need.` +
    `He grinds into you hard, hips thrusting against your soaked core, the rough friction sending waves of pleasure so sharp they sting.` +
    `“Say my name, Kayla. Tell me you want this. Tell me you want *me*.”`,
  choices: [
    { text: "Cry out his name", next: "rafe_climax_explicit" },
    { text: "Whisper your desire", next: "rafe_climax_explicit" }
  ]
},

rafe_climax_explicit: {
  text: () =>
    `You scream his name into the night as his fingers move faster, harder, driving you closer to the edge. His mouth finds your nipple, biting and sucking, sending shocks straight to your core. ` +
    `The heat builds, tightening, spiraling until you’re a quivering mess, every nerve alive and trembling.` +
    `With one final, brutal thrust, he sends you over, your body folding over his like you’re made of fire and flames.` +
    `“Fuck, Kayla,” he growls, breath ragged and heavy, “you’re unbelievable.”`,
  choices: [
    { text: "Collapse against him", next: "after_wild_ride" },
    { text: "Pull him closer for more", next: "rafe_desire_explicit" }
  ]
},

wild_threesome_intro: {
  text: () =>
    `Just as the heat between you and Rafe reaches its peak, the air shifts — a shadow falls over you. The Guardian steps forward, eyes blazing with equal fire and possessiveness.` +
    `“I’m not done with you, Kayla,” he growls, voice low and commanding.` +
    `Rafe smirks but doesn’t back down. “Looks like you’re going to have to share her tonight.”`,
  choices: [
    { text: "Let them both claim you", next: "wild_threesome" },
    { text: "Choose one to dominate", next: "choose_one" }
  ]
},

wild_threesome: {
  text: () =>
    `The Guardian’s strong hands grab your waist, lifting you effortlessly as Rafe’s lips trail down your neck, biting, sucking, marking. ` +
    `You’re pulled between two storms of desire — the Guardian’s fierce strength and Rafe’s wild, hungry passion.` +
    `They work together, hands and mouths exploring your body with an intensity that leaves you breathless and begging for more.` +
    `The Guardian’s fingers find places Rafe’s didn’t touch, drawing deep moans from your throat while Rafe’s tongue flicks over your clit, driving you wild.` +
    `You’re lost in a whirlwind of sensation, skin slick with sweat, hearts pounding in a chaotic, perfect rhythm.`,
  choices: [
    { text: "Surrender to their touch", next: "threesome_climax" },
    { text: "Fight for control", next: "fight_for_control" }
  ]
},

threesome_climax: {
  text: () =>
    `Together, they push you over the edge, hands and mouths claiming every inch as you scream their names, body trembling in a perfect storm of lust and love.` +
    `You collapse into their arms, utterly spent, but craving more of the fire only they can give.`,
  choices: [
    { text: "Hold them close", next: "after_wild_ride" },
    { text: "Rest and plan your next move", next: "plot_next" }
  ]
},

fight_for_control: {
  text: () =>
    `You push back, biting and clawing to remind them this fire is yours — fierce, untamable.` +
    `The Guardian grins, eyes dark with challenge, while Rafe’s smirk turns dangerous.` +
    `“We like a fight,” Rafe growls. “But don’t forget who holds the reins.”`,
  choices: [
    { text: "Take control", next: "take_control" },
    { text: "Let them lead for now", next: "threesome_climax" }
  ]
},

take_control: {
  text: () =>
    `You seize the moment, pushing them down, lips finding their sensitive spots, hands exploring with fierce intent.` +
    `Your fire matches theirs, a blazing dance of power and passion where nothing is off limits.` +
    `They respond in kind, surrendering to your wild command, the night theirs and yours in perfect balance.`,
  choices: [
    { text: "Ride the fire together", next: "threesome_climax" }
  ]
},

plot_next: {
  text: () =>
    `Breathless and exhilarated, you pull back, minds swirling with possibilities.` +
    `“This is only the beginning,” you whisper, already plotting the next chapter of this wild, dangerous game.`,
  choices: [
    { text: "Start your journey anew", next: "start" }
  ]
},

  // Render helpers
  function renderText(text) {
    if (typeof text === 'function') return text();
    return text;
  }

  function clearGame() {
    gameContainer.innerHTML = '';
  }

  function renderScene(key) {
    clearGame();
    currentSceneKey = key;
    const scene = scenes[key];
    if (!scene) {
      gameContainer.textContent = 'Scene not found.';
      return;
    }
	rafe_takeover: {
  text: () =>
    `Rafe doesn’t wait for permission. His hands slam down on your hips, gripping hard as he pulls you into a fierce, relentless rhythm. ` +
    `Every thrust is deep and brutal, hitting places inside you that make your guts twist and your breath hitch.` +
    `His mouth is on your collarbone, biting hard enough to leave bruises, teeth scraping skin as his voice roughens. “You’re mine to fuck stupid tonight.”` +
    `Your nails dig into his back, desperate to hold onto something as waves of pleasure crash over you.` +
    `He growls against your skin, fingers tightening inside you, hitting that sweet spot that makes your body shatter.` +
    `“Fuck, Kayla, you’re so fucking wet and tight, just for me.”`,
  choices: [
    { text: "Cry out, begging for more", next: "rafe_rough_climax" },
    { text: "Grab him and pull him deeper", next: "rafe_rough_climax" }
  ]
},

rafe_rough_climax: {
  text: () =>
    `Your body trembles, muscles clenching around him as he pushes you over the edge with savage persistence. ` +
    `Your scream breaks free, raw and desperate, echoing in the night as he spills inside you, groaning your name like a prayer.` +
    `You collapse against him, slick and spent, every nerve still burning with the aftermath of his rough love.`,
  choices: [
    { text: "Hold him close", next: "after_wild_ride" },
    { text: "Whisper dirty promises", next: "rafe_takeover" }
  ]
},

guardian_takeover: {
  text: () =>
    `The Guardian isn’t gentle. His hands grip your jaw, tilting your face up so his eyes lock with yours — fierce, possessive, and filled with raw desire.` +
    `“You’re mine,” he hisses, before crashing his lips down on yours with a hunger that steals your breath.` +
    `He devours you, tongue fighting for dominance as his hands roam your body, pinching, squeezing, marking you as his.` +
    `His hips slam into you with relentless power, each thrust deep and punishing, sending shockwaves through your core.` +
    `“Take it all,” he commands, voice rough and desperate. “Show me how much you want it.”`,
  choices: [
    { text: "Answer with a hungry moan", next: "guardian_rough_climax" },
    { text: "Bite back, claiming him", next: "guardian_rough_climax" }
  ]
},

guardian_rough_climax: {
  text: () =>
    `Your body ignites under his brutal touch, every nerve ending screaming as you fall apart in his arms.` +
    `You scream his name, voice raw and ragged, as he drives you to a brutal, shattering climax.` +
    `He grunts deep in your ear, voice thick with need. “That’s mine. Always.”`,
  choices: [
    { text: "Melt into him", next: "after_wild_ride" },
    { text: "Challenge him with a wicked grin", next: "guardian_takeover" }
  ]
},

after_wild_ride: {
  text: () =>
    `Sweat slick, breath ragged, and bodies tangled, you lie between the Guardian and Rafe — the perfect storm of fire and desire.` +
    `Their hands and lips still trace your skin, promising that this night was just the beginning.` +
    `“We’re not done with you,” the Guardian growls, voice low and dangerous.` +
    `Rafe chuckles darkly. “You better believe that.”`,
  choices: [
    { text: "Smile and brace for more", next: "start" }
  ]
}

    // Text display
    const textElem = document.createElement('p');
    textElem.textContent = renderText(scene.text);
    gameContainer.appendChild(textElem);

    // Input for name
    if (scene.input) {
      const input = document.createElement('input');
      input.type = 'text';
      input.placeholder = 'Type here...';
      input.autocomplete = 'off';
      gameContainer.appendChild(input);
      input.focus();

      const btn = document.createElement('button');
      btn.textContent = 'Continue';
      gameContainer.appendChild(btn);

      btn.addEventListener('click', () => {
        const val = input.value.trim();
        if (!val) return alert('Please enter a value.');
        if (key === 'setupName') {
          playerName = val;
        }
        renderScene(scene.next);
      });

      return;
    }

    // Select for pronouns or interests
    if (scene.select) {
      const select = document.createElement('select');
      scene.select.forEach(opt => {
        const option = document.createElement('option');
        option.value = opt.value;
        option.textContent = opt.label;
        select.appendChild(option);
      });
      gameContainer.appendChild(select);

      const btn = document.createElement('button');
      btn.textContent = 'Continue';
      gameContainer.appendChild(btn);

      btn.addEventListener('click', () => {
        const val = select.value;
        if (!val) return alert('Please select an option.');
        if (key === 'setupPronouns') {
          playerPronouns = pronounsSets[val];
          if (!playerPronouns) playerPronouns = pronounsSets['they'];
        } else if (key === 'setupInterest') {
          interestGender = val;
        }
        renderScene(scene.next);
      });

      return;
    }

    // Render choices
    if (scene.choices && scene.choices.length > 0) {
      scene.choices.forEach(choice => {
        const btn = document.createElement('button');
        btn.classList.add('choice-btn');
        btn.textContent = choice.text;
        btn.addEventListener('click', () => {
          renderScene(choice.next);
        });
        gameContainer.appendChild(btn);
      });
    } else {
      // If no choices, show button to restart or a message
      const btn = document.createElement('button');
      btn.textContent = 'Restart Story';
      btn.addEventListener('click', () => renderScene('start'));
      gameContainer.appendChild(btn);
    }
  }

})();
</script>

</body>
</html>
